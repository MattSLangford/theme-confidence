{{ define "main" }}
<div class="posts h-feed">

{{ $paginator := .Paginate (where .Site.Pages.ByDate.Reverse "Type" "post") (index .Site.Params "archive-paginate" | default 10) }}
{{ range $paginator.Pages  }}

  <div class="post">
    <a href="{{ .Permalink }}" class="post-date u-url"><time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">{{ .Date.Format "2 January 2006" }} ⌘</time></a>
	{{ if .Title }}
		<h1 class="page-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
		<div class="e-content">
		<p>{{ .Summary }}</p>
		<p><a class="finish-reading" href="{{ .Permalink }}">Finish Reading</a></p>
    </div>
  {{ else }}
  	<div class="e-content">
		{{ .Content }}
    </div>
  </div>
	{{ end }}
	<div class="post-nav">
    {{ if $paginator.HasPrev }}
        <span class="prev">
			<a href="{{ $paginator.Prev.URL }}" title="Previous Page">
				<span class="arrow">←</span> Newer Posts
			</a>
        </span>
    {{ end }}
    {{ if $paginator.HasNext }}
        <span class="next">
            <a href="{{ $paginator.Next.URL }}">
                Older Posts <span class="arrow">→</span>
            </a>
        </span>
    {{ end }}
</div>

{{ end }}

</div>
<div class="subscribe">
  <p>Subscribe to my blog to get new posts sent to your inbox. <i>Max 1 per week.</i></p>
<form method="POST" action="https://micro.blog/users/subscribe/60824">
  <input type="text" name="email" size="30" placeholder="Your email address"> 
  <input type="submit" value="Subscribe">
</form>
</div>
{{ end }}